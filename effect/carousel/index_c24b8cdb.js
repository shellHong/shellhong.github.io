"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,n){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.carousel=n()}(void 0,function(){var t=null,n=function(){V&&z>1&&null==t&&(t=setInterval(function(){C(B,0,"left")},Q.autoCarouselTime||5e3))},e=function(){null!=t&&(clearInterval(t),t=null)},i=function(t){return Object.prototype.toString.call(t)},a=function(t,n,e){var i=[t];"[object array]"==Object.prototype.toString.call(t).toLowerCase()&&(i=t),i.forEach(function(t){e&&e(t,n)})},o=function(t,n){a(t,n,function(t,n){t.addEventListener("webkitTransitionEnd",n),t.addEventListener("transitionend",n),t["data-fns"]||(t["data-fns"]=[]),t["data-fns"].push(n)})},r=function(){return Z?D:W},s=function(){var t=Math.floor((z-1)/2),n=t*r();N=t,h(B,-n),B["data-translate"]=-n},l=function t(n){return n.length>1&&n.length<5?t(n.concat(n)):n},u=function(){I.style.position="relative"},c=function(t){if(t=l(t)){var n="";t.forEach(function(t){n+=F.replace("{{url}}",t)}),n=H.replace("{{lis}}",n),I.innerHTML=n}},f=function(){if(U){var t=k();X.forEach(function(n,e){e!=t&&v(X[e],Q.rate)})}},d=function(){K=z-1},p=function(t,n,e){n.test(t.style.transform)?t.style.transform=t.style.transform.replace(n,e):t.style.transform+=e},y=function(t,n,e){n.test(t.style.transform)?t.style.webkitTransform=t.style.webkitTransform.replace(n,e):t.style.webkitTransform+=e},h=function(t,n){p(t,/translate3d\([^)]+\)/," translate3d("+n+"px, 0, 0) "),y(t,/-webkit-translate3d\([^)]+\)/," -webkit-translate3d("+n+"px, 0, 0) ")},v=function(t,n){p(t,/scaleY\([^)]+\)/," scaleY("+n+") "),y(t,/-webkit-scaleY\([^)]+\)/," -webkit-scaleY("+n+") ")},b=function(t){if(U){t=Math.abs(t);var n=1-(1-Q.rate)*t/D;n<Q.rate&&(n=Q.rate),v(X[k()],n)}},m=function(t){if(U){var n=Math.abs(t),e=Q.rate+(1-Q.rate)*n/D;e>1&&(e=1),t>0?v(X[L()],e):v(X[T()],e)}},g=function(t,n){var e=t["data-translate"];h(t,n+e),t["data-translate"]=n+e},w=function(){X.forEach(function(t){t.style.width=Z?D-Q.marginR+"px":D+"px",t.style.height=P+"px"})},E=function(){return U?Q.gap*z:0},k=function(){var t=N%z;return t<0?t+z:t},L=function(){var t=(N-1)%z;return t<0?t+z:t},T=function(){var t=(N+1)%z;return t<0?t+z:t},x=function(){var t=E();X.forEach(function(n,e){h(n,D*e+t)})},S=function(){X=Array.prototype.slice.call(I.querySelectorAll("li")),_=X.slice(0),z=X.length},j=function(){return W=I.offsetWidth,U?("[object string]"==i(Q.gap).toLowerCase()&&-1!=Q.gap.indexOf("%")&&(Q.gap=W*parseFloat(Q.gap.replace("%",""))/100),W-2*Q.gap):Z?("[object string]"==i(Q.width).toLowerCase()&&-1!=Q.width.indexOf("%")&&(Q.width=W*parseFloat(Q.width.replace("%",""))/100),"[object string]"==i(Q.marginR).toLowerCase()&&-1!=Q.marginR.indexOf("%")&&(Q.marginR=W*parseFloat(Q.marginR.replace("%",""))/100),Q.width+Q.marginR):W},A=function(t,e,i){t.style.transition="transform "+(Q.animateTime||q)+"s ease-out",t.style.webkitTransition="-webkit-transform "+(Q.animateTime||q)+"s ease-out",t.offsetWidth,i(t,e),t.hasAddTEndListener||(t.hasAddTEndListener=!0,o(t,function(){M(t),n()}))},M=function(t){t.style.transition="unset",t.style.webkitTransition="unset",G=!1,t.hasAddTEndListener=!1},C=function(t,n,e){(0!=n||e)&&(G=!0,Math.abs(n)>O||e?n>0||"r"==e?(A(t,D-n,g),U&&(A(X[k()],Q.rate,v),A(X[L()],1,v)),Y()):(U&&(A(X[k()],Q.rate,v),A(X[T()],1,v)),A(t,-D-n,g),R()):(U&&(A(X[k()],1,v),A(X[T()],Q.rate,v),A(X[L()],Q.rate,v)),A(t,-n,g)))},R=function(){if(N++,K-N<2){K++,J++;var t=_.shift();_.push(t),h(t,K*D+E())}},Y=function(){if(--N-J<2){J--,K--;var t=_.pop();_.unshift(t),h(t,J*D+E())}},O=30,q=.2,F="<li style='position:absolute;background-size: cover;background-image: url({{url}});-webkit-backface-visibility:hidden;backface-visibility:hidden;user-select:none;'></li>",H="<ul style='position:relative;list-style-type:none;padding:0;margin:0;'>{{lis}}</ul>",I=null,W=0,X=null,_=null,z=0,D=0,P=0,B=null,G=!1,J=0,K=0,N=0,Q=null,U=!1,V=!1,Z=!1;return{init:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};I=t,Q=i,U="scale"==i.type,Z="parallel"==i.type,V=1==i.isAutoCarousel,c(e),u(),X=I.querySelectorAll("li");var a=1==(z=X.length);B=I.querySelector("ul"),D=j(),P=I.offsetHeight,z&&(a||S(),w(),a||(x(),s(),f(),d(),this.addEvent(),n()))},addEvent:function(){function t(){f=!1,s=0,l=0,u=0,c=0}function n(){C(B,u)}var i=0,a=0,o=0,r=0,s=0,l=0,u=0,c=0,f=!1,d=0,p=0;I.addEventListener("touchstart",function(t){f=!0,i=t.touches[0].clientX,a=t.touches[0].clientY}),I.addEventListener("touchmove",function(n){if(f&&!G){var y=0==s&&0==l;if(d=n.touches[0].clientX,p=n.touches[0].clientY,s=d-(o||i),l=p-(r||a),o=d,r=p,y){if(Math.abs(s)<Math.abs(l))return void t()}else e(),u+=s,c+=l,g(B,s),b(u),m(u);n.preventDefault(),n.stopPropagation()}}),I.addEventListener("touchend",function(e){f&&(n(),t())}),I.addEventListener("touchcancel",function(e){f&&(n(),t())})}}});